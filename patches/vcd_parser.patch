diff --git a/src/VCDScanner.l b/src/VCDScanner.l
index 5bd1206..5a6c42d 100644
--- a/src/VCDScanner.l
+++ b/src/VCDScanner.l
@@ -394,6 +394,7 @@ void VCDFileParser::scan_begin() {
         error("Cannot open "+filepath+": "+strerror(errno));
         exit(EXIT_FAILURE);
     }
+    yypush_buffer_state(yy_create_buffer( yyin, YY_BUF_SIZE ));
 }
 
 void VCDFileParser::scan_end() {
